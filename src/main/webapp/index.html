<!--

    pottery-backend - Backend API for testing programming exercises
    Copyright Â© 2015 Andrew Rice (acr31@cam.ac.uk)

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

-->
<html>
<head>
<link rel="stylesheet" href="jquery.jsonview.css" />
<script type="text/javascript"
	src="//code.jquery.com/jquery-1.11.2.min.js"></script>
 <script type="text/javascript" src="jquery.jsonview.js"></script>
<script type="text/javascript" src="index.js"></script>
 </head>

<body>

	<div style="float: left; width: 30em">
		<p>TaskId: <input type="text" id="taskId"/></p>
		<p>TaskSHA1: <input type="text" id="tasksha1" value="HEAD"/></p> 
		<p>RepoId: <input type="text" id="repoId"/></p>
		<p>RepoTag: <input type="text" id="repoTag" value="HEAD"/></p>
		<p>SubmissionTag: <input type="text" id="submissionTag"/></p>
		<hr />
		
		<h2>Tasks</h2>
		
		<input type="submit" value="List defined tasks" id="listDefinedTasksButton" /><br />
		<input type="submit" value="List retired tasks" id="listRetiredTasksButton" /><br />
		<input type="submit" value="List testing tasks" id="listTestingTasksButton" /><br />
		<input type="submit" value="List registered tasks" id="listRegisteredTasksButton" /><br />
		<input type="submit" value="Create new task" id="createTaskButton" /><br />

		<input type="submit" value="Update testing task" id="updateTestingTaskButton" /><br />
		<input type="submit" value="Poll update process" id="pollUpdateButton" /><br />
		
		<input type="submit" value="Register task" id="registerTaskButton" /><br />
		<input type="submit" value="Poll registration process" id="pollRegistrationButton" /><br />
		
		<input type="submit" value="Retire task" id="retireTaskButton" /><br />
		<input type="submit" value="Unretire task" id="unretireTaskButton" /><br />

        <p>Create a remote task</p>
        <form id="createRemoteTaskForm">
            <p>Remote URI: <input type="text" id="remoteURI" name="remoteURI" value="ssh://"/>
            <p><input type="submit" value="Create remote task"/></p>
        </form>
		<hr />

		<h2>Repositories</h2>
		<p>Commence on a task (create a repository)</p>
		<form id="startTaskForm">
			<p>Validity (minutes): <input type="text" id="validity" name="validity" value="60"/></p>
			<p>Variant: <input type="text" id="variant" name="variant" value="java"/></p>
			<p><input type="submit" value="Start task" /></p>
		</form>

		<form id="startTestingTaskForm">
			<p>Validity (minutes): <input type="text" id="validityTest" name="validityTest" value="60"/></p>
			<p>Variant: <input type="text" id="variantTest" name="variantTest" value="java"/></p>
			<p><input type="submit" value="Start task (use testing version of task)" /></p>
		</form>

		<form id="startRemoteTaskForm">
			<p>Validity (minutes): <input type="text" id="validityRemote" name="validityRemote" value="60"/></p>
			<p>Variant: <input type="text" id="variantRemote" name="variantRemote" value="java"/></p>
			<p>Remote: <input type="text" id="repoRemote" name="repoRemote" value="ssh://"/></p>
			<p><input type="submit" value="Start task (remote repo)" /></p>
		</form>


		<p>List tags in repo</p>
		<form id="listRepoTags">
			<p><input type="submit" value="List tags"/></p>
		</form>

		<p>List files in repo</p>
		<form id="listRepo">
			<p><input type="submit" value="List files" /></p>
		</form>

		<p>Update a file in the repo.</p>
		<form id="updateRepo" enctype="multipart/form-data">
			<p>Filename: <input type="text" id="fileName" name="fileName"/></p>
			<p>Mimetype:<input type="text" name="mimeType" value="text/plain"/></p>
			<p>File:<input type="file" name="data"/></p>
			<input type="hidden" name="padding" value="padding"/>
			<input type="submit"/>
		</form>

		<p>Read a file in the repo.</p>
		<form id="readRepo">
			<p>Filename: <input type="text" id="readFile"/></p>
			<p>Submit: <input type="submit" value="read file"/></p>
		</form>

		<p>Delete a file from the repo.</p>
		<form id="deleteFromRepo">
			<p>Filename: <input type="text" id="deleteFile"/></p>
			<p>Submit: <input type="submit" value="delete file"/></p>
		</form>
		

		<p>Reset repo to tag</p>
		<form id="resetRepo">
			<p>Tag: <input type="text" id="resetTag"/></p>
			<p>Submit: <input type="submit" value="reset repo"/></p>
		</form>
		

		<p>Create a new tag in the repo</p>
		<form id="tagRepo">
			<p>Submit: <input type="submit" value="tag repo"/></p>
		</form>

		<hr />

		<h2>Testing</h2>

		<p>Request testing</p>
		<form id="requestTestForm">
			<p><input type="submit" value="Request testing" id="requestTestingButton"/></p>
		</form> 
		
		<p>Poll status</p>
		<form id="pollStatusForm">
			<p><input type="submit" value="Poll status" id="pollSubmissionButton"/></p>
		</form>

		<p>Poll output</p>
		<form id="pollOutputForm">
			<p>Step: <input type="text" id="stepName"/></p>
			<p><input type="submit" value="Poll output" id="pollOutputButton"/></p>
		</form>

		<h2>Config</h2>
		<p>Config</p>
		<form id="setWorkersForm">
			<p>Number of worker threads: <input type="text" id="workerThreads" name="workerThreads" value="1"/></p>
			<p><input type="submit" value="Update" /></p>
		</form>
		
		<p>Get work queue</p>
		<form id="getWorkQueueForm">
			<p><input type="submit" value="Get work queue" id="getWorkQueue"/></p>
		</form> 
		
		<p>Server Status</p>
		<form id="serverStatusForm">
			<p><input type="submit" value="Server status" id="serverStatus"/></p>
		</form>
		
	</div>

	<div style="position: fixed; top: 0px; left: 30em; width: 20em; height:100%">
		<div id="json">
		</div>

		<div id="error" style="color: red">
			<pre></pre>
		</div>
	</div>
</body>

</html>